{% extends "base.html.twig" %}
{% block title 'Home'%}
{% block body %}
<section class="container-fluid col-xs-12 p-0">
    <div class="bghome">
        <div class="container-fluid d-flex flex-column justify-content-center align-items-center">
            <h1> Snowtricks</h1>
            <h5 class="container text-center">
                Welcome to Snowtricks !
            </h5>
        </div>
        <div class="col-lg-12" style="margin-bottom: 10px;">
            <a class="btn text-uppercase float-right" href="#portfolio">
                <img src="{{ asset('icons/arrow-down.svg') }}" height="25px">
            </a>
        </div>
    </div>
</section>

<section id="portfolio">
    <div class="container mt-4">
        <h2>Last Tricks</h2>
        <div class="row flex" id="snowtricks">
            {{ include('pages/loadmore.html.twig')}}
        </div>
        <div>
            <a id="loadMore" class="mb-10">
                <button class="btn btn-primary">Load more</button>
            </a>
            <a id="up" class="btn text-uppercase float-right fixed-bottom" href="#portfolio">
                <img src="{{ asset('icons/arrow-up.svg') }}" height="25px">
            </a>
        </div>
    </div>
</section>
{% endblock %}

{% block javascripts %}
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
    click = 1;
    $("#up").hide();
        function loadMore(event) {
            event.preventDefault();
            click++;
            const url = "{{ path('loadmore') }}";

            axios.get(url, {
                params: {
                    page:click
                }
            }
            ).then(function (response) {
                $("#snowtricks").append(response.data);
                if (snowtrick === 3) {
                    $("#up").show();
                }
            });
        }
        document.getElementById('loadMore').addEventListener('click', loadMore);
    </script>
{% endblock %}